#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” VÃ©rification du projet avant push..."

# VÃ©rifier que le frontend build correctement
echo "ğŸ“¦ Building frontend..."
cd frontend && npm run build
if [ $? -ne 0 ]; then
  echo "âŒ Erreur : Le frontend ne compile pas"
  exit 1
fi
cd ..

# VÃ©rifier que le backend compile (si script existe)
if [ -f "backend/package.json" ] && grep -q "build" backend/package.json; then
  echo "ğŸ“¦ Building backend..."
  cd backend && npm run build
  if [ $? -ne 0 ]; then
    echo "âŒ Erreur : Le backend ne compile pas"
    exit 1
  fi
  cd ..
fi

echo "âœ… Tous les contrÃ´les sont passÃ©s. Push autorisÃ© !"
